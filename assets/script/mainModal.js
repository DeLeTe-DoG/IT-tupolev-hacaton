let timeTable_data = [
    {
        id: 1,
        date: 'Понедельник',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Практика',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9^40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 2,
        date: 'Вторник',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 8,
                auditory: 418,
                time: '11:20',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Практика',
                building: 8,
                auditory: 418,
                time: '11:20',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 3,
        date: 'Среда',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 4,
        date: 'Четверг',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Спецкурс',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 5,
        date: 'Пятница',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 6,
        date: 'Суббота',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
]

let rating_data = [
    {
        name: 'Иванов Н.Е',
        activity_rate: 1,
        come_rate: 5,
    },
    {
        name: 'Смирнов Т.Ж',
        activity_rate: 2,
        come_rate: 2,
    },
    {
        name: 'Сидоров О.П',
        activity_rate: 3,
        come_rate: 1,
    },
    {
        name: 'Реактов К.И',
        activity_rate: 4,
        come_rate: 7,
    },
    {
        name: 'Ангуляров Х.А',
        activity_rate: 6,
        come_rate: 6,
    },
    {
        name: 'Джесонов Х.В',
        activity_rate: 5,
        come_rate: 4,
    },
    {
        name: 'Объектов Х.З',
        activity_rate: 7,
        come_rate: 3,
    },
]

let active_user = "Иванов Н.Е"
let active_user_place = 0

let minElem = rating_data[0].all_rate

for (let i = 0; i < rating_data.length; i++) {
    rating_data[i].all_rate = rating_data[i].activity_rate + rating_data[i].come_rate
}
let sorted_come_group = rating_data
for (let i = 0; i < sorted_come_group.length; i++) {
    for (let j = i; j < sorted_come_group.length; j++) {
      if (sorted_come_group[i].come_rate < sorted_come_group[j].come_rate) {
        let temp = sorted_come_group[i]; 
        sorted_come_group[i] = sorted_come_group[j];
        sorted_come_group[j] = temp;
      };
    };
};
let sorted_activ_group = rating_data
for (let i = 0; i < sorted_activ_group.length; i++) {
    for (let j = i; j < sorted_activ_group.length; j++) {
      if (sorted_activ_group[i].activity_rate < sorted_activ_group[j].activity_rate) {
        let temp = sorted_activ_group[i]; 
        sorted_activ_group[i] = sorted_activ_group[j];
        sorted_activ_group[j] = temp;
      };
    };
};
console.log(sorted_activ_group)
let sorted_group = rating_data
for (let i = 0; i < sorted_group.length; i++) {
    for (let j = i; j < sorted_group.length; j++) {
      if (sorted_group[i].all_rate < sorted_group[j].all_rate) {
        let temp = sorted_group[i]; 
        sorted_group[i] = sorted_group[j];
        sorted_group[j] = temp;
      };
    };
};
console.log(sorted_group)
for (let i = 0; i <= sorted_group.length; i++) {
    if (sorted_group[i]?.name == 'Иванов Н.Е') active_user_place = i + 1
}

let best_users = sorted_group
best_users = best_users.slice(0, 3)

let best_user = best_users[0]
best_users[0] = best_users[1]
best_users[1] = best_user

console.log(best_users)

// console.log(sorted_group)
let openModal = function(type) {
    document.getElementById('app').insertAdjacentHTML('afterbegin', `
        <div id="modal" class="modal-lists">
            <div class="modal-list__wrapper">
                
            </div>
        </div>
    `)
    if (type == 'time-table') {
        timeTable_data.forEach(item => {
            document.querySelector('.modal-list__wrapper').insertAdjacentHTML('beforeend', `
                <div class="modal-list-item">
                    <div class="modal-list-item__header">
                        <h2 class="time-table-date">${item.date}</h2>
                        
                    </div>
                </div>
            `)
        })
        document.querySelector('.modal-list-item__header').insertAdjacentHTML('beforeend', `
            <button onClick={document.getElementById('modal').remove()} class="close-modal" type="button">
                <svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="8.75903" y="29.9722" width="30" height="5" rx="2.5" transform="rotate(-45 8.75903 29.9722)" fill="#5269FF"/>
                    <rect x="12.4456" y="8.76758" width="30" height="5" rx="2.5" transform="rotate(45 12.4456 8.76758)" fill="#5269FF"/>
                </svg>
            </button>
        `)

        for (let i = 0; i <= timeTable_data.length; i++) {
            timeTable_data[i]?.classes?.forEach(item => {
                document.querySelectorAll('.modal-list-item')[i].insertAdjacentHTML('beforeend', `
                    <div class="modal-list-item__block">
                        <div class="model-list-item-wrapper">
                            <h3 class="day-name">${item.name}</h3>
                            <div class="flex-wrapper">
                                <p>${item.type}</p>
                                <p>${item.building} здание - ${item.auditory} аудитория</p>
                                <p>${item.time}</p>
                                <p>${item.week} неделя</p>
                            </div>
                        </div>
                        <div class="model-list-item-wrapper">
                            <h3 class="modal-list-item__teacher">${item.teacher}</h3>
                        </div>
                    </div>
                `)
            })
        }
    } 
    if (type == 'rating') {
        document.querySelector('.modal-list__wrapper').insertAdjacentHTML('afterbegin', `
            <div class="rating-header">
                <h2 class="rating-header_user-name">${active_user}</h2>
                <h2 class="rating-header_user-place">${active_user_place} место</h2>
            </div>
            <div class="rating-body">
                <div class="rating-body__wrapper">
                    <div class="default-rating-wrap">
                        <h2>Рейтинг по активности</h2>
                        <table class="rating-table">
                            <thead>
                                <tr>
                                    <td>Место</td>
                                    <td>ФИО</td>
                                    <td>Рейтинг</td>
                                </tr>
                            </thead>
                            <tbody id="activ-rate"></tbody>
                        </table>
                    </div>
                    <div class="default-rating-wrap">
                        <h2>Рейтинг по посещаемости</h2>
                        <table id="come-rate" class="rating-table">
                            <thead>
                                <tr>
                                    <td>Место</td>
                                    <td>ФИО</td>
                                    <td>Рейтинг</td>
                                </tr>
                            </thead>
                            <tbody id="come-rate"></tbody>
                        </table>
                    </div>
                </div>

                <div class="rating-body__bars">
                    
                </div>
            </div>
        `)

        for (let i = 0; i < sorted_activ_group.length; i++) {
            document.getElementById('activ-rate').insertAdjacentHTML('beforeend', `
                <tr>
                    <td>${i + 1}</td>
                    <td>${sorted_activ_group[i]?.name}</td>
                    <td>${sorted_activ_group[i]?.activity_rate}</td>
                </tr>
            `)
        }
        for (let i = 0; i < sorted_come_group.length; i++) {
            document.getElementById('come-rate').insertAdjacentHTML('beforeend', `
                <tr>
                    <td>${i + 1}</td>
                    <td>${sorted_come_group[i]?.name}</td>
                    <td>${sorted_come_group[i]?.come_rate}</td>
                </tr>
            `)
        }
        for (let i = 0; i < best_users.length; i++) {
            document.querySelector('.rating-body__bars').insertAdjacentHTML('beforeend', `
                <div class="rating-bar-wrapper">
                    <h3 class="rating-bar__title">${best_users[i].name}</h3>
                    <div id="top-${i + 1}-user" class="rating-bar__bar"></div>
                </div>
            `)
            if (i == 1) {
                document.querySelectorAll('.rating-bar-wrapper')[i].insertAdjacentHTML('afterbegin', `
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M28.9284 8.57136L22.4999 14.9999L14.9999 4.28564L7.49986 14.9999L1.07129 8.57136V22.4999C1.07129 23.3524 1.40994 24.17 2.01273 24.7728C2.61553 25.3756 3.43309 25.7142 4.28557 25.7142H25.7141C26.5666 25.7142 27.3842 25.3756 27.987 24.7728C28.5898 24.17 28.9284 23.3524 28.9284 22.4999V8.57136Z" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                `)
            }
            
            if (i == 0) {
                document.querySelectorAll('.rating-bar-wrapper')[i].insertAdjacentHTML('afterbegin', `
                    <svg width="16" height="22" viewBox="0 0 16 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 14C1 10.134 4.022 7 7.75 7H8.25C11.978 7 15 10.134 15 14C15 17.866 11.978 21 8.25 21H7.75C4.022 21 1 17.866 1 14Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6.5 12.118C6.58 11.333 7.108 11 7.658 11H8.324C8.874 11 9.401 11.333 9.481 12.118C9.50538 12.3721 9.50538 12.6279 9.481 12.882C9.432 13.36 8.854 13.909 8.854 13.909L8 14.5C8 14.5 6.5 15.5 6.5 16.5C6.5 17.04 6.937 17 7.477 17H9.481M9.56 1L7 6.898M14 1L11.179 7.5M6.44 1L8 4.594M2 1L4.821 7.5" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                `)
            }
            if (i == 2) {
                document.querySelectorAll('.rating-bar-wrapper')[i].insertAdjacentHTML('afterbegin', `
                    <svg width="20" height="28" viewBox="0 0 20 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1.25 17.75C1.25 12.9175 5.0275 9 9.6875 9H10.3125C14.9725 9 18.75 12.9175 18.75 17.75C18.75 22.5825 14.9725 26.5 10.3125 26.5H9.6875C5.0275 26.5 1.25 22.5825 1.25 17.75Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8.125 15.3975C8.225 14.4163 8.88375 14 9.5725 14H10.405C11.0925 14 11.7512 14.4163 11.8512 15.3975C11.8817 15.7151 11.8817 16.0349 11.8512 16.3525C11.7687 17.1625 11.2138 17.75 10.6138 17.75M10.6138 17.75C11.2138 17.75 11.7687 18.3375 11.8512 19.1475C11.8817 19.4651 11.8817 19.7849 11.8512 20.1025C11.7512 21.0837 11.0925 21.5 10.405 21.5H9.5725C8.88375 21.5 8.225 21.0837 8.125 20.1025M10.6138 17.75H10.5387M11.95 1.5L8.75 8.8725M17.5 1.5L13.9737 9.625M8.05 1.5L10 5.9925M2.5 1.5L6.02625 9.625" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                `)
            }
        }

    }
}

// let openModalButton = document.querySelector('.main-action-button')
// openModalButton.addEventListener('click', openModal)

// document.querySelector('.close-modal').addEventListener('click', () => {
//     document.getElementById('modal').remove()
// })