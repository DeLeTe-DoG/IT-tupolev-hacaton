let timeTable_data = [
    {
        id: 1,
        date: 'Понедельник',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Практика',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9^40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 2,
        date: 'Вторник',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 8,
                auditory: 418,
                time: '11:20',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Практика',
                building: 8,
                auditory: 418,
                time: '11:20',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 3,
        date: 'Среда',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 4,
        date: 'Четверг',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Спецкурс',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 5,
        date: 'Пятница',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
    {
        id: 6,
        date: 'Суббота',
        classes: [
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '8:00',
                week: 'чётная',
                teacher: 'Иванов Иван Иванович'
            },
            {
                name: 'Пакеты прикладных проргамм в профессиональной деятельности',
                type: 'Лабораторная работа',
                building: 2,
                auditory: 418,
                time: '9:40',
                week: 'нечётная',
                teacher: 'Иванов Иван Иванович'
            },
        ],
    },
]

let rating_data = [
    {
        name: 'Иванов Н.Е',
        activity_rate: 1,
        come_rate: 5,
    },
    {
        name: 'Смирнов Т.Ж',
        activity_rate: 2,
        come_rate: 2,
    },
    {
        name: 'Сидоров О.П',
        activity_rate: 3,
        come_rate: 1,
    },
    {
        name: 'Реактов К.И',
        activity_rate: 4,
        come_rate: 7,
    },
    {
        name: 'Ангуляров Х.А',
        activity_rate: 6,
        come_rate: 6,
    },
    {
        name: 'Джесонов Х.В',
        activity_rate: 5,
        come_rate: 4,
    },
    {
        name: 'Объектов Х.З',
        activity_rate: 7,
        come_rate: 3,
    },
]

let active_user = "Иванов Н.Е"
let active_user_place = 0

let minElem = rating_data[0].all_rate

for (let i = 0; i < rating_data.length; i++) {
    rating_data[i].all_rate = rating_data[i].activity_rate + rating_data[i].come_rate
}
let sorted_come_group = rating_data
for (let i = 0; i < sorted_come_group.length; i++) {
    for (let j = i; j < sorted_come_group.length; j++) {
      if (sorted_come_group[i].come_rate < sorted_come_group[j].come_rate) {
        let temp = sorted_come_group[i]; 
        sorted_come_group[i] = sorted_come_group[j];
        sorted_come_group[j] = temp;
      };
    };
};
let sorted_activ_group = rating_data
for (let i = 0; i < sorted_activ_group.length; i++) {
    for (let j = i; j < sorted_activ_group.length; j++) {
      if (sorted_activ_group[i].activity_rate < sorted_activ_group[j].activity_rate) {
        let temp = sorted_activ_group[i]; 
        sorted_activ_group[i] = sorted_activ_group[j];
        sorted_activ_group[j] = temp;
      };
    };
};
console.log(sorted_activ_group)
let sorted_group = rating_data
for (let i = 0; i < sorted_group.length; i++) {
    for (let j = i; j < sorted_group.length; j++) {
      if (sorted_group[i].all_rate < sorted_group[j].all_rate) {
        let temp = sorted_group[i]; 
        sorted_group[i] = sorted_group[j];
        sorted_group[j] = temp;
      };
    };
};
console.log(sorted_group)
for (let i = 0; i <= sorted_group.length; i++) {
    if (sorted_group[i]?.name == 'Иванов Н.Е') active_user_place = i + 1
}

let best_users = sorted_group
best_users = best_users.slice(0, 3)

let best_user = best_users[0]
best_users[0] = best_users[1]
best_users[1] = best_user

console.log(best_users)

// console.log(sorted_group)
let openModal = function(type) {
    document.getElementById('app').insertAdjacentHTML('afterbegin', `
        <div id="modal" class="modal-lists">
            <div class="modal-list__wrapper">
                
            </div>
        </div>
    `)
    if (type == 'time-table') {
        timeTable_data.forEach(item => {
            document.querySelector('.modal-list__wrapper').insertAdjacentHTML('beforeend', `
                <div class="modal-list-item">
                    <div class="modal-list-item__header">
                        <h2 class="time-table-date">${item.date}</h2>
                        
                    </div>
                </div>
            `)
        })
        document.querySelector('.modal-list-item__header').insertAdjacentHTML('beforeend', `
            <button onClick={document.getElementById('modal').remove()} class="close-modal" type="button">
                <svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="8.75903" y="29.9722" width="30" height="5" rx="2.5" transform="rotate(-45 8.75903 29.9722)" fill="#5269FF"/>
                    <rect x="12.4456" y="8.76758" width="30" height="5" rx="2.5" transform="rotate(45 12.4456 8.76758)" fill="#5269FF"/>
                </svg>
            </button>
        `)

        for (let i = 0; i <= timeTable_data.length; i++) {
            timeTable_data[i]?.classes?.forEach(item => {
                document.querySelectorAll('.modal-list-item')[i].insertAdjacentHTML('beforeend', `
                    <div class="modal-list-item__block">
                        <div class="model-list-item-wrapper">
                            <h3 class="day-name">${item.name}</h3>
                            <div class="flex-wrapper">
                                <p>${item.type}</p>
                                <p>${item.building} здание - ${item.auditory} аудитория</p>
                                <p>${item.time}</p>
                                <p>${item.week} неделя</p>
                            </div>
                        </div>
                        <div class="model-list-item-wrapper">
                            <h3 class="modal-list-item__teacher">${item.teacher}</h3>
                        </div>
                    </div>
                `)
            })
        }
    } 
    if (type == 'rating') {
        document.querySelector('.modal-list__wrapper').insertAdjacentHTML('afterbegin', `
            <div class="rating-header">
                <h2 class="rating-header_user-name">${active_user}</h2>
                <h2 class="rating-header_user-place">${active_user_place} место</h2>
            </div>
            <div class="rating-body">
                <div class="rating-body__wrapper">
                    <div class="default-rating-wrap">
                        <h2>Рейтинг по активности</h2>
                        <table class="rating-table">
                            <thead>
                                <tr>
                                    <td>Место</td>
                                    <td>ФИО</td>
                                    <td>Рейтинг</td>
                                </tr>
                            </thead>
                            <tbody id="activ-rate"></tbody>
                        </table>
                    </div>
                    <div class="default-rating-wrap">
                        <h2>Рейтинг по посещаемости</h2>
                        <table id="come-rate" class="rating-table">
                            <thead>
                                <tr>
                                    <td>Место</td>
                                    <td>ФИО</td>
                                    <td>Рейтинг</td>
                                </tr>
                            </thead>
                            <tbody id="come-rate"></tbody>
                        </table>
                    </div>
                </div>

                <div class="rating-body__bars">
                    
                </div>
            </div>
        `)

        for (let i = 0; i < sorted_activ_group.length; i++) {
            document.getElementById('activ-rate').insertAdjacentHTML('beforeend', `
                <tr>
                    <td>${i + 1}</td>
                    <td>${sorted_activ_group[i]?.name}</td>
                    <td>${sorted_activ_group[i]?.activity_rate}</td>
                </tr>
            `)
        }
        for (let i = 0; i < sorted_come_group.length; i++) {
            document.getElementById('come-rate').insertAdjacentHTML('beforeend', `
                <tr>
                    <td>${i + 1}</td>
                    <td>${sorted_come_group[i]?.name}</td>
                    <td>${sorted_come_group[i]?.come_rate}</td>
                </tr>
            `)
        }
    }
}

// let openModalButton = document.querySelector('.main-action-button')
// openModalButton.addEventListener('click', openModal)

// document.querySelector('.close-modal').addEventListener('click', () => {
//     document.getElementById('modal').remove()
// })